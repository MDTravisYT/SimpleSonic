TINYANIM.FRAMETIMER	=	$1E

TINYANIM:
		MOVEQ	#0,	D0
		MOVE.B	OBJ.ACTION(A0),		D0
		MOVE.W	@INDEX(PC,D0.W),	D1
		JMP		@INDEX(PC,D1.W)
		
	@INDEX:
		DC.W	@INIT-@INDEX
		DC.W	@MAIN-@INDEX
		DC.W	@EXIT-@INDEX
		
	@INIT:
		ADDQ.B	#2,	OBJ.ACTION(A0)
		MOVE.W	#$100,	OBJ.X(A0)
		MOVE.W	#$60,	OBJ.Y(A0)
		MOVE.L	#MAP_OBJTEST,	OBJ.MAP(A0)
		MOVE.W	#$0,	OBJ.TILE(A0)
		MOVE.B	#4,	OBJ.RENDERFLAGS(A0)
		MOVE.B	#1,	OBJ.COLPROP(A0)
		MOVE.B	#3,	OBJ.PRIORITY(A0)
		
	@MAIN:
		BSR.W	_OBJECTDISPLAY
		SUBQ.B	#1,	TINYANIM.FRAMETIMER(A0)
		BPL.S	@WAIT
		MOVE.B	#$10,	TINYANIM.FRAMETIMER(A0)
		MOVE.B	OBJ.FRAME(A0),	D0
		ADDQ.B	#1,	D0
		CMPI.B	#2,	D0
		BCS.S	@CHANGEFRAME
		MOVEQ	#0,	D0
		
	@CHANGEFRAME:
		MOVE.B	D0,	OBJ.FRAME(A0)
		
	@WAIT:
		RTS
		
	@EXIT:
		RTS
		
MAP_OBJTEST:	INCLUDE	"MAP/TESTOBJ.ASM"